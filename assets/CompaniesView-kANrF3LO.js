import{_ as V,c as x,a as n,t as C,b as e,w as a,A as y,r as d,o as D,d as u}from"./index-uJ9wh_J2.js";const v={data(){return{pageTitle:"",companies:[],dialogVisible:!1,currentCompany:{name:"",taxNumber:"",receiptTitle:"",monthlyBank:"",accountNumber:""},isEditing:!1,companiesFormRules:{name:[{required:!0,message:"請輸入公司名稱",trigger:"blur"}],taxNumber:[{required:!0,min:8,max:8,message:"請輸入正確的統一編號格式",trigger:"blur"}],receiptTitle:[{required:!0,message:"請輸入公司抬頭",trigger:"blur"}],monthlyBank:[{required:!0,message:"請輸入月租銀行",trigger:"blur"}],accountNumber:[{required:!0,message:"請輸入銀行專案代號",trigger:"blur"}]},deleteCompanyDialogVisible:!1,deleteCompanyData:null}},computed:{dialogTitle(){return this.isEditing?"修改公司資料":"新增公司資料"}},mounted(){this.getPageTitle(),this.getCompanyData()},methods:{getPageTitle(){this.pageTitle=this.$route.name},getCompanyData(){const i=`${y}/main/searchCompanyInfo`;this.axios.get(i).then(t=>{this.companies=t.data.data})},openCompanyDialog(i){i?(this.currentCompany={...i},this.isEditing=!0):(this.currentCompany={name:"",taxNumber:"",receiptTitle:"",monthlyBank:"",accountNumber:""},this.isEditing=!1),this.dialogVisible=!0},saveCompany(){this.$refs.eidtCompanyForm.validate(i=>{if(i){if(this.isEditing){const t=`${y}/main/updateCompanyInfo`;this.axios.post(t,this.currentCompany).then(p=>{p.data.returnCode==0&&(alert(p.data.message),this.getCompanyData())})}else{const t=`${y}/main/insertCompanyInfo`;this.axios.post(t,this.currentCompany).then(p=>{p.data.returnCode==0&&(alert(p.data.message),this.getCompanyData())})}this.dialogVisible=!1}})},cancelSaveCompany(){this.dialogVisible=!1,this.$refs.eidtCompanyForm.clearValidate()},openDeleteCompanyDialog(i){this.deleteCompanyDialogVisible=!0,this.deleteCompanyData=i},deleteCompany(){const i=`${y}/main/deleteCompanyInfo`;this.axios.post(i,{id:this.deleteCompanyData.id}).then(t=>{t.data.returnCode==0&&(alert(t.data.message),this.getCompanyData(),this.deleteCompanyDialogVisible=!1)})}}},k={class:"container"},N={class:"d-flex justify-content-center align-items-center"},T={class:"flex-grow-1 text-center"},w={class:"dialog-footer d-flex justify-content-end"},B={class:"d-flex flex-column"},U={class:"row mb-2 justify-content-center"},A=n("div",{class:"col-3 text-end"},"公司名稱",-1),E={class:"col-4 text-start fw-bold"},j={class:"row mb-2 justify-content-center"},q=n("div",{class:"col-3 text-end"},"統編",-1),F={class:"col-4 text-start fw-bold"},I={class:"row mb-2 justify-content-center"},P=n("div",{class:"col-3 text-end"},"抬頭",-1),S={class:"col-4 text-start fw-bold"},R={class:"dialog-footer"};function z(i,t,p,G,l,s){const r=d("el-button"),m=d("el-table-column"),_=d("el-table"),c=d("el-input"),g=d("el-form-item"),b=d("el-form"),f=d("el-dialog");return D(),x("div",k,[n("div",N,[n("h2",T,C(l.pageTitle),1),e(r,{class:"ms-auto",onClick:t[0]||(t[0]=o=>s.openCompanyDialog())},{default:a(()=>[u("新增")]),_:1})]),e(_,{data:l.companies,height:"600"},{default:a(()=>[e(m,{align:"center",prop:"name",label:"公司名稱"}),e(m,{align:"center",prop:"taxNumber",label:"統編"}),e(m,{align:"center",prop:"receiptTitle",label:"抬頭"}),e(m,{align:"center",prop:"monthlyBank",label:"月租銀行"}),e(m,{align:"center",prop:"accountNumber",label:"銀行專案代號"}),e(m,{align:"center",label:"修改",fixed:"right"},{default:a(o=>[e(r,{onClick:h=>s.openCompanyDialog(o.row)},{default:a(()=>[u("修改")]),_:2},1032,["onClick"])]),_:1}),e(m,{align:"center",label:"刪除",fixed:"right"},{default:a(o=>[e(r,{type:"danger",onClick:h=>s.openDeleteCompanyDialog(o.row)},{default:a(()=>[u("刪除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(f,{modelValue:l.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=o=>l.dialogVisible=o),title:s.dialogTitle,width:"500",center:""},{default:a(()=>[e(b,{model:l.currentCompany,"label-width":"auto",rules:l.companiesFormRules,ref:"eidtCompanyForm"},{default:a(()=>[e(g,{label:"公司名稱",prop:"name"},{default:a(()=>[e(c,{modelValue:l.currentCompany.name,"onUpdate:modelValue":t[1]||(t[1]=o=>l.currentCompany.name=o)},null,8,["modelValue"])]),_:1}),e(g,{label:"統編",prop:"taxNumber"},{default:a(()=>[e(c,{modelValue:l.currentCompany.taxNumber,"onUpdate:modelValue":t[2]||(t[2]=o=>l.currentCompany.taxNumber=o),type:"number"},null,8,["modelValue"])]),_:1}),e(g,{label:"抬頭",prop:"receiptTitle"},{default:a(()=>[e(c,{modelValue:l.currentCompany.receiptTitle,"onUpdate:modelValue":t[3]||(t[3]=o=>l.currentCompany.receiptTitle=o)},null,8,["modelValue"])]),_:1}),e(g,{label:"月租銀行",prop:"monthlyBank"},{default:a(()=>[e(c,{modelValue:l.currentCompany.monthlyBank,"onUpdate:modelValue":t[4]||(t[4]=o=>l.currentCompany.monthlyBank=o)},null,8,["modelValue"])]),_:1}),e(g,{label:"銀行專案代號",prop:"accountNumber"},{default:a(()=>[e(c,{modelValue:l.currentCompany.accountNumber,"onUpdate:modelValue":t[5]||(t[5]=o=>l.currentCompany.accountNumber=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),n("div",w,[e(r,{onClick:s.cancelSaveCompany},{default:a(()=>[u("取消")]),_:1},8,["onClick"]),e(r,{type:"primary",onClick:s.saveCompany},{default:a(()=>[u("確定")]),_:1},8,["onClick"])])]),_:1},8,["modelValue","title"]),e(f,{modelValue:l.deleteCompanyDialogVisible,"onUpdate:modelValue":t[8]||(t[8]=o=>l.deleteCompanyDialogVisible=o),"close-on-click-modal":!1,title:"刪除公司基本資料",width:"500",center:""},{footer:a(()=>[n("div",R,[e(r,{onClick:t[7]||(t[7]=o=>l.deleteCompanyDialogVisible=!1)},{default:a(()=>[u("取消")]),_:1}),e(r,{type:"danger",onClick:s.deleteCompany},{default:a(()=>[u("確認刪除")]),_:1},8,["onClick"])])]),default:a(()=>[n("div",B,[n("div",U,[A,n("div",E,C(l.deleteCompanyData.name),1)]),n("div",j,[q,n("div",F,C(l.deleteCompanyData.taxNumber),1)]),n("div",I,[P,n("div",S,C(l.deleteCompanyData.receiptTitle),1)])])]),_:1},8,["modelValue"])])}const J=V(v,[["render",z]]);export{J as default};
